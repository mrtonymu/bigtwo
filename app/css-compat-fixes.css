/* CSS兼容性修复 - 解决浏览器兼容性警告 */

/* 修复 1: -webkit-text-size-adjust 兼容性 */
* {
  /* 现代浏览器 */
  text-size-adjust: 100%;
  /* 旧版Safari和Chrome支持 */
  -webkit-text-size-adjust: 100%;
  /* 旧版Firefox支持 */
  -moz-text-size-adjust: 100%;
  /* 旧版IE支持 */
  -ms-text-size-adjust: 100%;
}

/* 修复 2: field-sizing 替代方案 */
/* 使用传统的box-sizing来替代field-sizing */
input, textarea, select {
  box-sizing: border-box;
  /* 确保在所有浏览器中正确计算尺寸 */
  width: 100%;
}

/* 修复 3: color-mix() 的降级方案 */
/* 使用rgba替代color-mix混合颜色 */
.bg-black\/50 {
  /* 降级方案：使用rgba */
  background-color: rgba(0, 0, 0, 0.5) !important;
}

.bg-black\/90 {
  /* 降级方案：使用rgba */
  background-color: rgba(0, 0, 0, 0.9) !important;
}

/* 修复 4: text-wrap 兼容性 */
/* 使用传统的文本换行属性 */
.text-wrap {
  /* 现代浏览器 */
  text-wrap: wrap;
  /* 降级方案 */
  white-space: normal;
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  -ms-hyphens: auto;
}

.text-nowrap {
  /* 现代浏览器 */
  text-wrap: nowrap;
  /* 降级方案 */
  white-space: nowrap;
}

.text-balance {
  /* 现代浏览器 */
  text-wrap: balance;
  /* 降级方案 */
  text-align: justify;
  hyphens: auto;
  -webkit-hyphens: auto;
  -moz-hyphens: auto;
  -ms-hyphens: auto;
}

/* 额外的兼容性修复 */

/* 修复Flexbox在旧版IE中的问题 */
.flex {
  display: -webkit-box;
  display: -webkit-flex;
  display: -ms-flexbox;
  display: flex;
}

.inline-flex {
  display: -webkit-inline-box;
  display: -webkit-inline-flex;
  display: -ms-inline-flexbox;
  display: inline-flex;
}

/* 修复Grid在旧版浏览器中的问题 */
.grid {
  display: grid;
  /* 仅在支持的浏览器中使用旧版前缀 */
}

/* 修复CSS变量在旧版浏览器中的降级 */
:root {
  /* 为不支持CSS变量的浏览器提供降级颜色 */
  --fallback-primary: #6366f1;
  --fallback-secondary: #f3f4f6;
  --fallback-background: #ffffff;
  --fallback-foreground: #1f2937;
}

/* IE 11 特殊修复 */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
  /* IE 11 特定样式 */
  .flex {
    display: -ms-flexbox;
  }
  
  /* IE 11 网格布局使用flexbox替代 */
  .grid {
    display: -ms-flexbox;
    display: flex;
    flex-wrap: wrap;
  }
}

/* Safari特殊修复 */
@supports (-webkit-appearance: none) {
  /* Safari特定样式 */
  input[type="text"], 
  input[type="password"], 
  input[type="email"] {
    -webkit-appearance: none;
    appearance: none;
  }
}

/* Firefox特殊修复 */
@-moz-document url-prefix() {
  /* Firefox特定样式 */
  .firefox-fix {
    /* Firefox特定修复 */
  }
}

/* 触摸设备优化 */
@media (pointer: coarse) {
  /* 增加触摸目标的大小 */
  button, input, select, textarea {
    min-height: 44px;
    min-width: 44px;
  }
}

/* 高对比度模式支持 */
@media (prefers-contrast: high) {
  * {
    border-color: CanvasText !important;
  }
  
  .btn-primary {
    background-color: Highlight !important;
    color: HighlightText !important;
  }
}

/* 减少动画对于偏好用户 */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* 打印样式优化 */
@media print {
  /* 隐藏不必要的元素 */
  nav, .sidebar, .header, .footer {
    display: none !important;
  }
  
  /* 确保文本颜色在打印时可读 */
  * {
    color: black !important;
    background: white !important;
  }
}

/* 为不支持现代CSS的浏览器提供基础样式 */
.no-js {
  /* 当JavaScript被禁用时的降级样式 */
}

/* 渐进增强：为支持现代CSS的浏览器提供增强样式 */
@supports (display: grid) {
  .enhanced-grid {
    /* 现代网格布局 */
  }
}

@supports (backdrop-filter: blur(10px)) {
  .glass-effect {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
}